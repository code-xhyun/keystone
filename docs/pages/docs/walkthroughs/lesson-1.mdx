import { Markdown } from '../../../components/Markdown';

# Lesson 1: Setting up Keystone

> In this lesson we will install the keystone package, create our first list, and get Keystone running

## Installing the packages you need

For our packages, we will be using `yarn`, but you can use `npm` or any other package manager that you prefer.

The first thing we are going to do is set ourselves up a workspace for our new project. Let's make ourselves a new folder and initialise `yarn`.

```bash
mkdir keystone-learning
cd keystone-learning
yarn init
```

After this, let's add the Keystone package:

```bash
yarn add @keystone-6/core
```

## Setting up Keystone

There are two parts of Keystone's configuration that are required to start our project: `lists` and the `db`.

The `lists` define the shape of the information we want to save in our database, while the `db` defines how we will connect to our database.

For now though let us set up our `keystone.ts`:

```js
export default {};
```

When you run Keystone using `yarn keystone dev`, it will use this file's default export to as Keystone's configuration.
However, as is, if we try to run `yarn keystone dev` it will not work _yet_.

> If you want to use Keystone without TypeScript, you can use `keystone.js` instead.

### Setting up a Database

For our first project, we're going to use [SQLite](https://www.sqlite.org/) to minimise database configuration.
The configuration for a minimal example using SQLite example is below:

```js
import { config } from '@keystone-6/core';

export default config({
  db: {
    provider: 'sqlite',
    url: 'file:./keystone.db',
  },
});
```

This will use the local path `./keystone.db` for our database storage.

### Setting up a user list

We're almost there!
Now we are going to add a `User` list, with the two fields `name` and `email`:

```js{9-16}[5-8]
import { config, list } from '@keystone-6/core';
import { text } from '@keystone-6/core/fields';

export default config({
  db: {
    provider: 'sqlite',
    url: 'file:./keystone.db',
  },
  lists: {
    User: list({
      fields: {
        name: text({ isRequired: true }),
        email: text({ isRequired: true }),
      },
    }),
  },
});
```

The list names are derived from the keys in the `lists` object.
For example, the `User` key becomes the name for the respective `User` list.
This will be used in the Admin UI for the default display name of the list; and it is also used for the generated GraphQL API.
More on that later.

The field names are derived from the keys in the `fields` object.
This will be used in the Admin UI for the default display name of the fields; and it is also used for the generated GraphQL API.
Again, more on that later.

## Starting your new app

Congratulations!
You can now start Keystone instance:

```bash
yarn keystone dev
```

Wait until your terminal shows a link to the Admin UI:
```
go to [http://localhost:3000](http://localhost:3000)
```

Hurray! :tada:
You now have a running Keystone with one list.

Next lesson, we will add a second list for posts associated with our users.

export default ({ children }) => <Markdown description="Learn how to get your first Keystone project up and running using the `create-keystone-app` Command Line Interface.">{children}</Markdown>
